{"remainingRequest":"F:\\myblob\\vue-element-admin\\node_modules\\thread-loader\\dist\\cjs.js!F:\\myblob\\vue-element-admin\\node_modules\\babel-loader\\lib\\index.js!F:\\myblob\\vue-element-admin\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!F:\\myblob\\vue-element-admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\myblob\\vue-element-admin\\src\\views\\table\\inline-edit-table.vue?vue&type=script&lang=js&","dependencies":[{"path":"F:\\myblob\\vue-element-admin\\src\\views\\table\\inline-edit-table.vue","mtime":1574149531351},{"path":"F:\\myblob\\vue-element-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\myblob\\vue-element-admin\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\myblob\\vue-element-admin\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"F:\\myblob\\vue-element-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\myblob\\vue-element-admin\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.split\";\nimport \"core-js/modules/es6.regexp.constructor\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { getOwnerInfo } from \"@/api/table\";\nexport default {\n  name: \"messageboard\",\n  data: function data() {\n    var checkUsername = function checkUsername(rule, value, callback) {\n      var reg = new RegExp(/^([a-zA-Z0-9-\\u4e00-\\u9fa5]+)$/);\n\n      if (!reg.test(value)) {\n        callback(new Error(\"请输入正确的姓名\"));\n      } else {\n        callback();\n      }\n    };\n\n    var checkPhone = function checkPhone(rule, value, callback) {\n      var reg = new RegExp(/^[1][3,4,5,6,7,8,9][0-9]{9}$/);\n\n      if (!reg.test(value)) {\n        callback(new Error(\"请输入正确的电话\"));\n      } else {\n        callback();\n      }\n    };\n\n    var checkCarNo = function checkCarNo(rule, value, callback) {\n      if (!value) {\n        callback();\n      } else {\n        var reg = new RegExp(/^[鲁京津沪渝冀晋辽吉黑苏浙皖闽赣豫鄂湘粤琼川贵云陕甘青藏桂蒙宁新]{1}[A-Z]{1}[A-Z0-9]{4}[A-Z0-9挂学警港澳]{1}$/);\n\n        if (!reg.test(value)) {\n          callback(new Error(\"请输入正确的车牌号\"));\n        } else {\n          callback();\n        }\n      }\n    };\n\n    return {\n      listLoading: false,\n      //\n      pageInfo: {\n        //分页\n        currentPage: 1,\n        pageSize: 10,\n        pageTotal: 80\n      },\n      id: \"\",\n      formSearch: {\n        // 状态\n        nstatus: \"-1\",\n        //表单查询\n        username: \"\",\n        phone: \"\",\n        carNo: \"\"\n      },\n      formDect: {\n        dectNo: \"\"\n      },\n      formDesc: {\n        desc1: \"\",\n        desc2: \"\",\n        desc3: \"\"\n      },\n      dectNo: \"\",\n      formDectEdit: {\n        username: \"\",\n        date: \"\",\n        time: \"\"\n      },\n      formEdit: {//表单编辑\n      },\n      addFormVisible: false,\n      userList: [],\n      isDisabled: false,\n      formDectTitle: \"检测单号\",\n      //\n      formDectDisabled: false,\n      //\n      formDescTitle: \"活动详情\",\n      //\n      formDescDisabled: false,\n      //\n      dialogDescVisible: false,\n      dialogDectVisible: false,\n      //编辑弹框显示\n      dialogDectVisibleEdit: false,\n      dialogType: \"\",\n      //弹框类型：add,edit,show\n      tableData: [],\n      labelPosition: \"right\",\n      //lable对齐方式\n      labelWidth: \"80px\",\n      //lable宽度\n      multipleSelection: [],\n      rules: {\n        username: [{\n          validator: checkUsername,\n          trigger: \"change\"\n        }, {\n          required: true,\n          message: \"请输入姓名\",\n          trigger: \"blur\"\n        }],\n        phone: [{\n          validator: checkPhone,\n          trigger: \"change\"\n        }, {\n          required: true,\n          message: \"请输入电话\",\n          trigger: \"blur\"\n        }],\n        carNo: [{\n          validator: checkCarNo,\n          trigger: \"change\"\n        }]\n      }\n    };\n  },\n  computed: {},\n  filters: {\n    convertType: function convertType(type) {\n      if (type == 1) {\n        return \"留言\";\n      } else if (type == 2) {\n        return \"建议\";\n      } else if (type == 3) {\n        return \"BUG\";\n      }\n    }\n  },\n  mounted: function mounted() {\n    // 搜索\n    this.onSearch();\n  },\n  methods: {\n    handleEditDesc: function handleEditDesc() {\n      this.dialogDescVisible = true;\n    },\n    dectIsShow: function dectIsShow(nstatus) {\n      //\n      this.formDect.dectNo = \"\";\n      var status = true;\n\n      if (parseInt(nstatus) == 1) {\n        status = false;\n      }\n\n      return status;\n    },\n\n    /**\r\n     * 查询列表\r\n     */\n    onSearch: function onSearch(currentPage) {\n      var _this = this;\n\n      if (currentPage) {\n        this.pageInfo.currentPage = 1;\n      }\n\n      this.listLoading = true;\n      var param = Object.assign({}, this.formSearch, this.pageInfo);\n      getOwnerInfo(param).then(function (data) {\n        _this.listLoading = false;\n        console.log(\"表格执行到这里了\");\n\n        if (data) {\n          var json = data;\n\n          if (json.result.resultCode == \"0\") {\n            _this.pageInfo.pageTotal = json.total; //this.pageInfo.currentPage = json.pageCount;\n\n            _this.tableData = json.userInfos;\n            console.log(json.userInfos);\n          } else if (json.message) {\n            _this.$message({\n              message: json.message,\n              type: \"error\"\n            });\n          }\n        }\n      }).catch(function (err) {\n        _this.listLoading = false;\n\n        _this.$message({\n          message: \"查询异常，请重试\",\n          type: \"error\"\n        });\n      });\n    },\n    //领取操作弹窗\n    handleDect: function handleDect(index, rowData) {\n      var _this2 = this;\n\n      this.id = rowData.id;\n      this.dialogDectVisible = true;\n      this.$nextTick(function () {\n        _this2.formDectTitle = \"检测单号\";\n        _this2.formDectDisabled = false;\n      });\n    },\n    // 编辑信息内容\n    handleDectEdit: function handleDectEdit(index, rowData) {\n      var _this3 = this;\n\n      this.id = rowData.id; // 深拷贝处理\n\n      this.formDectEdit = window.JSON.parse(window.JSON.stringify(rowData)); // 记录dectNo\n\n      this.dectNo = window.JSON.parse(window.JSON.stringify(rowData.dectNo));\n      var timestr = rowData.signUpTime.split(\" \"); // this.formDectEdit.newDate = new Date(timestr[0]);\n      // this.formDectEdit.newTime = new Date(2016, 9, 10, 8, 40, 50);\n\n      var ymd = timestr[0].split(\"-\");\n      var hms = timestr[1].split(\":\");\n      this.formDectEdit.signUpTime = new Date(ymd[0], parseInt(ymd[1]) - 1, ymd[2], hms[0], hms[1], hms[2]);\n      this.dialogDectVisibleEdit = true; // 设置单号框的状态\n\n      this.isDisabled = parseInt(this.formDectEdit.nstatus) == 1 ? false : true;\n      this.$nextTick(function () {\n        _this3.formDectTitle = \"编辑报名信息\";\n        _this3.formDectDisabled = false;\n      });\n    },\n    // 领取操作\n    formDectSubmit: function formDectSubmit() {\n      var _this4 = this;\n\n      if (!this.formDect.dectNo) {\n        this.$message({\n          message: \"请填写检测单号\",\n          type: \"error\"\n        });\n        return false;\n      }\n\n      apis.msgApi.changeStutas({\n        id: this.id,\n        dectNo: this.formDect.dectNo\n      }).then(function (data) {\n        if (data && data.data) {\n          var json = data.data;\n\n          if (json && json.result.resultCode == \"0\") {\n            _this4.$message({\n              message: \"领取成功\",\n              type: \"success\"\n            });\n\n            _this4.dialogDectVisible = false;\n\n            _this4.onSearch();\n\n            return;\n          } else {\n            _this4.$message({\n              message: json.result.resultDesc,\n              type: \"error\"\n            });\n          }\n        }\n      }).catch(function (err) {\n        debugger;\n\n        _this4.$message({\n          message: \"执行失败，请重试\",\n          type: \"error\"\n        });\n      });\n    },\n\n    /**\r\n     * 删除\r\n     */\n    handleDelete: function handleDelete(index, rowData) {\n      var _this5 = this;\n\n      var id = rowData.id;\n      console.log(id);\n      this.$confirm(\"确定删除该条信息, 是否继续?\", \"提示\", {\n        confirmButtonText: \"确定\",\n        cancelButtonText: \"取消\",\n        type: \"warning\"\n      }).then(function () {\n        apis.msgApi.deleteInfo({\n          id: id\n        }).then(function (data) {\n          if (data && data.data) {\n            var json = data.data;\n\n            if (json && json.result.resultCode == \"0\") {\n              _this5.$message({\n                message: \"删除信息成功\",\n                type: \"success\"\n              });\n\n              _this5.dialogDectVisible = false;\n\n              _this5.onSearch();\n\n              return;\n            }\n          }\n\n          _this5.$message({\n            message: \"执行失败，请重试\",\n            type: \"error\"\n          });\n        }).catch(function (err) {\n          debugger;\n\n          _this5.$message({\n            message: \"执行失败，请重试\",\n            type: \"error\"\n          });\n        });\n      }).catch(function () {\n        _this5.$message({\n          type: \"info\",\n          message: \"已取消删除\"\n        });\n      });\n    },\n    selectNstatus: function selectNstatus(e) {\n      //状态赋值\n      this.formDectEdit.nstatus = e;\n\n      if (e == \"1\") {\n        //选择了已领取\n        this.isDisabled = false;\n        this.formDectEdit.dectNo = this.dectNo;\n      } else {\n        // 未领取\n        this.formDectEdit.dectNo = \"\";\n        this.isDisabled = true;\n      }\n    },\n    // 修改操作\n    formDectEditSubmit: function formDectEditSubmit(formName) {\n      var _this6 = this;\n\n      this.$refs[formName].validate(function (valid) {\n        //校验\n        if (valid) {\n          if (parseInt(_this6.formDectEdit.nstatus) == 1 && !_this6.formDectEdit.dectNo) {\n            _this6.$message({\n              message: \"请填写检测单号\",\n              type: \"error\"\n            });\n\n            return false;\n          }\n\n          apis.msgApi.editInfo({\n            id: _this6.id,\n            dataEdit: _this6.formDectEdit\n          }).then(function (data) {\n            if (data && data.data) {\n              var json = data.data;\n\n              if (json && json.result.resultCode == \"0\") {\n                _this6.$message({\n                  message: \"修改信息成功\",\n                  type: \"success\"\n                });\n\n                _this6.onSearch();\n\n                _this6.dialogDectVisibleEdit = false;\n                return;\n              }\n            }\n\n            _this6.$message({\n              message: json.result.resultDesc,\n              type: \"error\"\n            });\n          }).catch(function (err) {\n            debugger;\n\n            _this6.$message({\n              message: \"执行失败，请重试\",\n              type: \"error\"\n            });\n          });\n        } else {\n          return false;\n        }\n      });\n    },\n    formDescSubmit: function formDescSubmit() {\n      var _this7 = this;\n\n      if (this.formDesc.desc1 && this.formDesc.desc2 && this.formDesc.desc3) {\n        apis.msgApi.editDesc({\n          desc: this.formDesc\n        }).then(function (data) {\n          if (data && data.data) {\n            var json = data.data;\n\n            if (json && json.result.resultCode == \"0\") {\n              _this7.$message({\n                message: \"修改活动信息成功\",\n                type: \"success\"\n              });\n\n              _this7.dialogDescVisible = false;\n              return;\n            }\n          }\n\n          _this7.$message({\n            message: json.result.resultDesc,\n            type: \"error\"\n          });\n        }).catch(function (err) {\n          debugger;\n\n          _this7.$message({\n            message: \"执行失败，请重试\",\n            type: \"error\"\n          });\n        });\n      } else {\n        this.$message({\n          message: \"请填写活动详情\",\n          type: \"error\"\n        });\n        return false;\n      }\n    },\n    getDesc: function getDesc() {\n      var _this8 = this;\n\n      var that = this;\n      apis.msgApi.getDesc({}).then(function (data) {\n        if (data && data.data) {\n          var json = data.data;\n\n          if (json && json.result.resultCode == \"0\") {\n            that.formDesc = json.descInfo[0];\n            that.dialogDescVisible = true;\n          }\n        }\n      }).catch(function (err) {\n        debugger;\n\n        _this8.$message({\n          message: \"执行失败，请重试\",\n          type: \"error\"\n        });\n      });\n    },\n    onReset: function onReset() {\n      this.$refs[\"formSearch\"].resetFields();\n    },\n\n    /**\r\n     * 关闭弹框，数据重置\r\n     */\n    closeDialog: function closeDialog(formName) {//this.$refs[formName].resetFields();\n    },\n\n    /**\r\n     * 分页大小切换\r\n     */\n    handleSizeChange: function handleSizeChange(val) {\n      this.pageInfo.pageSize = val;\n      this.onSearch();\n    },\n\n    /**\r\n     * 分页切换\r\n     */\n    handleCurrentChange: function handleCurrentChange(val) {\n      this.pageInfo.currentPage = val;\n      this.onSearch();\n    },\n\n    /**\r\n     * 点击选择\r\n     */\n    handleSelectionChange: function handleSelectionChange(val) {\n      var ids = []; // for (var i = 0; i < val.length; i++) {\n      //   if (val[i].tiId) {\n      //     ids.push(val[i].tiId);\n      //   }\n      // }\n\n      var idsStr = ids.join(\",\"); //this.multipleSelection = val;\n\n      this.ids = idsStr; // this.$message({\n      //     message: '选中的项是:' + JSON.stringify(this.multipleSelection),\n      //     type: \"success\"\n      // });\n    },\n\n    /**\r\n     * 打开详情页\r\n     */\n    openDetail: function openDetail(row) {\n      this.$common.OpenNewPage(this, \"detail\", row);\n    }\n  }\n};",null]}